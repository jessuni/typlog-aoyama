{% from "macros.j2" import render_social_icons %}

{% block style %}
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="stylesheet" href="{{ static_url }}assets/main.css">
<link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;400;700&display=swap" rel="stylesheet">
{% endblock %}

{% block body %}
<div class="main">
  {% for item in query.latest_subjects(count=5, contains=['authors', 'tags']) %}
    {% if item.cover %}
      {% set layout = "horizontal" if item.cover.width > item.cover.height else "vertical" %}
      <div class="hero {{ layout }}">
    {% else %}
      <div class="hero">
    {% endif %}
    {% if item.cover %}
      <div class="hero-cover" style="background-image:url({{ item.cover.src|thumbnail('l') }})" aria-label="{{ item.title }}">
      </div>
    {% endif %}
    <div class="hero-info">
      {% if item.tags %}
        <div class="hero-tags">
        {% for tag in item.tags %}
          <a href="{{ linkify(tag.url) }}">{{ tag.title }}</a>
        {% endfor %}
        </div>
      {% endif %}
      <div class="hero-headline">
        <h2><a href="{{ linkify(item.url) }}">{{ item.title }}</a></h2>
        {% if item.subtitle %}
          <h3>{{ item.subtitle }}</h3>
        {% endif %}
      </div>
      <div class="hero-meta">
      {% if item.authors %}
        <div class="hero-authors">
          {% for author in item.authors %}
            <a href="{{ linkify(author.url) }}">{{ author.name }}</a>
          {% endfor %}
        </div>
      {% endif %}
        <div class="hero-time">
          <time class="dt-published" datetime="{{ item.published_at|xmldatetime }}" itemprop="datePublished">{{ item.published_at.strftime('%b %d, %Y') }}</time>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
